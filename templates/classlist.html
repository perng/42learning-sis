{% extends 'base.html' %} 
{% load core_tags %}
{% load url from future %}


{% block theme %} <link href="{% static_path %}/css/blue.css" rel="stylesheet" type="text/css" /> {% endblock %}
{% block title %}  Semester Setup {% endblock %}
{% block content %} 
<script>
    $(function() {
        var lateDate = $("#id_lateDate").val();
        $( "#id_lateDate" ).datepicker();
        $( "#id_lateDate" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
        $( "#id_lateDate").width(100);
        $( "#id_lateDate").val(lateDate);
    });
</script>

<div class="admin2">
    <h3 class="title"> Semester: <a href='{% url 'semester'  sem.eid %}'> {{sem}} </a> </h3>
    {% if classes %}
    <form class="classform" action='{% url 'classlist' sem.eid %}'  method='post'>
    
        {% csrf_token %}
        <table class="table table-bordered table-striped table-condensed" style="font-size:0.9em;">
            <tr>
                <th>Class </th>
                <th>Base<br/>(Credit Card)</th>
                <th>Base<br/>(Check/Cash)</th>
                <th>Book</th>
                <th>Material</th>
                <th>Misc</th>
                <th>Elective Discount </th> 
            </tr>
            {% for c in classes %}
            <tr> <td> <a href='{% url 'edit_class' sem_id=sem.eid class_id=c.eid %}'>{{c}}</a>  </td>
  		<td><span>$</span><input type="text" class="input-block-level" name="basecc_{{c.fee.eid}}" value="{{c.fee.basecc}}" id="id_basecc_{{c.fee.cid}}" />
		</td>
                <td><span>$</span><input type="text" class-"input-block-level" name="basechk_{{c.fee.cid}}" value="{{c.fee.basechk}}" id="id_basechk_{{c.fee.cid}}" /></td>
                <td><span>$</span><input type="text" class="input-block-level" name="book_{{c.fee.cid}}" value="{{c.fee.book}}" id="id_book_{{c.fee.cid}}" /></td>
                <td><span>$</span><input type="text" class="input-block-level" name="material_{{c.fee.cid}}" value="{{c.fee.material}}" id="id_material_{{c.fee.cid}}" /></td>
                <td><span>$</span><input type="text" class="input-block-level" name="misc_{{c.fee.cid}}" value="{{c.fee.misc}}" id="id_misc_{{c.fee.cid}}" /></td>
                <td>
                    {% if c.elective %}
                    <span>$</span><input type="text" class="input-block-level" name="mdiscount_{{c.fee.cid}}" value="{{c.fee.mdiscount}}" id="id_mdiscount_{{c.fee.cid}}" />
                    {% endif %}
                </td>

            </tr>

            {% endfor %}

        </table>
        <input class="btn btn-success" type='submit' name='feeupdate' value='    Update    '/>
    </form>
    {% endif %}

    {# <a href='{% url 'add_class' sem_id=sem.eid %}'> Add new class </a> #}

    <hr/>
    <a class="span2" href='{% url 'add_class' sem_id=sem.eid %}'><button class="btn btn-info" type="button"> Add new class </button></a>
    <br /><br />
    <hr/>
	<form class="classform" action='{% url 'classlist'  sem.eid %}' method='post'>
        {% csrf_token %}
        <table>
            <tr>
                <th>Number of students</th>
                <th> 1 </th>
                <th> 2 </th>
                <th> 3 </th>
                <th> 4 </th>
                <th> 5 </th>
            </tr>
            <tr>
                <th> Discount </th>
                <td> ${{feeconfigform.discount1}} </td>
                <td> ${{feeconfigform.discount2}} </td>
                <td> ${{feeconfigform.discount3}} </td>
                <td> ${{feeconfigform.discount4}} </td>
                <td> ${{feeconfigform.discount5}} </td>
            </tr>
        </table>
        {% for field in feeconfigform %} {{ field.errors }} {% endfor %}
        Per-family Registration Fee: ${{feeconfigform.familyFee}} <br/>
        {{feeconfigform.semester}}
        Late fee: ${{feeconfigform.lateFee}} (0 means no late fee. )<br/>
        Late registration starting date: {{feeconfigform.lateDate}} <br/> 
        <input class="btn btn-success" type='submit' name='feeconfigupdate' value='    Update    '/>
        {{form.errors}}
    </form>
 {{err}}
</div>
{% endblock %} 

